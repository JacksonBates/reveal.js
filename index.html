<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Slides Dashboard</title>

		<link rel="stylesheet" href="css/main.css">

	</head>
	<body>
		<h1>Available Slide Decks</h1>
		<div class='slideList'></div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
	<script>
		var htmlFiles = [];
    $.getJSON('https://api.github.com/repos/jacksonbates/slides/git/refs/heads/gh-pages', function(data) {
			var sha = data.object.sha;
			$.getJSON('https://api.github.com/repos/jacksonbates/slides/git/trees/' + sha, function(data) {
				data.tree.forEach(function(file) {
					var path = file.path;
					if (path.match(/.*(.html)/) && !path.match(/index.html/)) {
						// htmlFile.push(file.path);
						console.log(path);
						$('.slideList').add("<div><a href='http://jacksonbates.me/slides/" + path + "'>" + path.replace(/(.html)/, '') + "</a></div>").appendTo('.slideList');	

					}
				})
			})
		})
	</script>
	</body>
</html>
